<VirtualHost *:80>
    # DocumentRoot を変更
    DocumentRoot /var/www/html/client

    <Directory /var/www/html/client>
        AllowOverride All
        Require all granted
    </Directory>

    # Next.js の .next フォルダを設定
    <Directory /var/www/html/client/.next>
        AllowOverride All
        Require all granted
    </Directory>

    # Laravel バックエンドの設定
    <Directory /var/www/html/server/public>
        AllowOverride All
        Require all granted
    </Directory>

    # リライトエンジンの設定
    RewriteEngine On

    # Next.js のリクエストの設定
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^ /index.html [L]

    # Laravel バックエンドへのリクエストの設定
    RewriteCond %{REQUEST_URI} ^/api/
    RewriteRule ^api/(.*)$ /server/public/index.php?/$1 [L,QSA]

    # その他の設定
</VirtualHost>
